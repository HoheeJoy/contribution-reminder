rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Since the app uses custom authentication (not Firebase Auth),
    // we need to use App Check or implement custom security.
    // For now, using a time-based rule with App Check recommended.
    
    // Option 1: Time-based access (temporary - for development)
    // Replace with proper security rules when implementing App Check
    match /{document=**} {
      allow read, write: if request.time < timestamp.date(2026, 12, 31);
    }
    
    // Option 2: Public read, authenticated write (if using Firebase Auth later)
    // Uncomment and use this when migrating to Firebase Auth:
    /*
    match /members/{memberId} {
      allow read: if true; // Public read for now
      allow write: if request.auth != null;
    }
    
    match /contributions/{contributionId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /reminders/{reminderId} {
      allow read, write: if request.auth != null;
    }
    
    match /organizations/{orgId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /users/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow write: if request.auth != null;
    }
    
    match /audit_logs/{logId} {
      allow read, write: if request.auth != null;
    }
    */
  }
}

